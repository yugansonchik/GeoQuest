# GeoQuest

## Проект - Telegram bot 'GeoQuest'

Этот проект представляет собой Telegram-бота - аналога geoguesser. Бот показывает случайные панорамные фотографии городов или стран и предлагает пользователям угадать их

зарисовки устройства тг-бота - https://board.classuper.ru/#room=77202fec0ac71136bdfc,EqoerdanVU7NX5EcUykzAQ

### Детали

1. **Игровые режимы**:
    - **Страны**
    - **Города России**
    
2. **Оценка ответов пользователей**:
    - Оценка ответов в режиме "Города России" осуществляется на основе расстояния от правильного ответа. Чем ближе ответ пользователя к правильному ответу, тем больше баллов он получает ($accuracy =  \frac{1000}{\max(\sqrt{d} - 8,8; 1)}$, где d -- расстояние от города из ответа до верного города)
    - Оценка ответов в режиме "Страны" бинарна: 1 -- верный ответ; 0 -- неверный ответ
    - Возможно, мы предусмотрим коррекцию ответов, учитывая возможные описки
  
3. **Модуль обучения (по возможности)**:
   - предоставление общих советов - секретов по geoguesser или гайды по определенным странам

4. **Дизайн**:
   Аватарка: https://drive.google.com/file/d/19pd2-hUfg9bzWRfgScE_pKQGdyHXlx6-/view?usp=sharing


## Распределение обязанностей в команде

**Техническая часть - код бота - мы все, но основа - Миша @loowave**  
(в частности генерация токена через BotFather и настройка бота в Telegram, использование библиотеки python-telegram-bot)

**Настройка сервера для постоянной работы бота - @yugansonchik**
еще подумаем сделать облачный хостинг или деплой бота на сервер через докер

**Хранение фотографий панорам - @glebhitrin**:

Выбираем случайный город (страну) из заранее заготовленных датасетов. Выбираем 5 случайных фотографий из первых 20, предлагаемых Гугл картами по запросу с названием города (страны). Запросы делаем с помощью SerpApi. 


- тестирование - @yugansonchik
    - в принципе как бот взаимодействует с api - запросы и ответы обрабатываются ли правильно
    - проблема - обработка некорректного ввода
    - решение:
        - расстояние Левенштейна - кажется я что-то такое проворачивала в своей жизни, могу вспомнить
        - регулярки - пока непонятно, какую регулярку нужно написать, чтобы она под все случаи подходила, но, кажется, этот метод глобально может быть полезен
        - можно найти базу с условными синонимами (e.g. NYC - New York - New York City)
        - чувствительность к регистру
        - бот может запрашивать уточнение и повторный ввод

    - тестирование на пользователях

- формат - тг-бот, технический стек:
    - Telegram API
    - библиотека aiogram
    - PIL - Pillow - библиотека для обработки и отображения изображений
    - API карт и геолокации (google maps api или yandex maps api)
    - Базы данных для хранения информации о панорамах и правильных ответах (PostgreSQL или MySQL)
    - виртуальные серверы, облачные хостинги для развертывания бота
    - в случае промежуточного нахождения панорам где-то, нужна будет админ панель или какой-то веб интерфейс
    
- каким образом получается результат
    - загрузка случайных фоток с использованием SerpApi Гугл карт (Google Maps API + Google Maps Photos API)
    - отправка 5 фото пользователю в чате Telegram
    - ожидание ответа от пользователя в текстовом виде, который предоставляет город или страну в зависимости от режима
    - сравнение ответа пользователя с правильным ответом, полученным из API карт
    - оценка ответа пользователя (Детали - 2)
    - предоставление пользователю информации о результатах и, возможно, предложение еще одной попытки
    - повторение процесса для каждого раунда
