# GeoQuest

## Проект - Telegram bot 'GeoQuest'

Этот проект представляет собой Telegram-бота - аналога geoguesser. Бот показывает случайные панорамные фотографии городов или стран и предлагает пользователям угадать их

зарисовки устройства тг-бота - https://board.classuper.ru/#room=77202fec0ac71136bdfc,EqoerdanVU7NX5EcUykzAQ

### Детали

1. **Игровые режимы**:
    - **Страны**
    - **Города мира**
    
2. **Оценка ответов пользователей**:
    - Оценка ответов осуществляется на основе расстояния от правильного ответа. Чем ближе ответ пользователя к правильному ответу, тем больше баллов он получает (accuracy = 1000/(max(корень из расстояния в км - 8,8; 1))
    - Возможно, мы предусмотрим коррекцию ответов, учитывая возможные описки
  
3. **Модуль обучения (по возможности)**:
   - предоставление общих советов - секретов по geoguesser или гайды по определенным странам

4. **Дизайн**:
[сгенерированные авы нашего бота, еще в процессе выбора](https://drive.google.com/drive/folders/1aw0srMEqeNnbozHgzgScNVJBFU4Xre6A?usp=sharing)


## Распределение обязанностей в команде

**Техническая часть - код бота - мы все, но основа - Миша @loowave**  
(в частности генерация токена через BotFather и настройка бота в Telegram, использование библиотеки python-telegram-bot)

**Настройка сервера для постоянной работы бота - @yugansonchik**
еще подумаем сделать облачный хостинг или деплой бота на сервер через докер

**Хранение фотографий панорам - @glebhitrin**:

Рассмотрение вариантов хранения фотографий панорам, например, в базе данных или на каком-то внешнем ресурсе
некоторые источники, на которые будем опираться:
- [1](https://qna.habr.com/q/288566)
- [2](https://stackoverflow.com/questions/29668889/how-to-get-city-sights-images-from-google-places-api)
- [3](https://developers.google.com/maps/documentation/places/web-service/photos?hl=ru)
кратко идея: получаем несколько бд (для каждой страны по одной, и одну со списком стран). Оттуда будем рандомно выбирать какой-то специальный ключ, по которому будем запрашивать фотки из гугла 


- тестирование - @yugansonchik
    - в принципе как бот взаимодействует с api - запросы и ответы обрабатываются ли правильно
    - проблема - обработка некорректного ввода
    - решение:
        - расстояние Левенштейна - кажется я что-то такое проворачивала в своей жизни, могу вспомнить
        - регулярки - пока непонятно, какую регулярку нужно написать, чтобы она под все случаи подходила, но, кажется, этот метод глобально может быть полезен
        - можно найти базу с условными синонимами (e.g. NYC - New York - New York City)
        - чувствительность к регистру
        - бот может запрашивать уточнение и повторный ввод

- тестирование на пользователях


- формат - тг-бот, технический стек:
    - Telegram API
    - библиотека python-telegram-bot
    - PIL - Pillow - библиотека для обработки и отображения изображений
    - API карт и геолокации (google maps api или yandex maps api)
    - Базы данных для хранения информации о панорамах и правильных ответах (PostgreSQL или MySQL)
    - виртуальные серверы, облачные хостинги для развертывания бота
    - в случае промежуточного нахождения панорам где-то, нужна будет админ панель или какой-то веб интерфейс
    
- каким образом получается результат
    - загрузка случайной панорамы с использованием API карт (Google Maps или Yandex.Maps)
    - отправка панорамы пользователю в чате Telegram
    - ожидание ответа от пользователя, который предоставляет город или страну в зависимости от режима
    - сравнение ответа пользователя с правильным ответом, полученным из API карт
    - оценка ответа пользователя, например, на основе расстояния от правильного ответа, и начисление баллов
    - предоставление пользователю информации о результатах и, возможно, предложение еще одной попытки
    - повторение процесса для каждого раунда
